<main role="main" class="col-lg-12 px-md-4 mx-auto pt-3">
  <div class="row justify-content-center col-12">
    <%= render "shared/static_button_page", pages: "post" %>
    <div id="albumContent">
      <h1>Posts</h1>
      <%= turbo_frame_tag :posts, class: "row row-col-2" do %>
        <% @posts.each do |post| %>
          <%= content_tag(:div) do %>
            <div class="card mb-2" style="border: none;">
              <div class="card-header" style="border: none; background-color: #EFEFEF;">
                <% if post.user.avatar.attached? %>
                  <%= image_tag(post.user.avatar, alt: "#{post.user.username}", class: "avatar-image rounded-circle", id: "avatarUserHeader") %>
                <% else %>
                  <%= image_tag("user.jpg", alt: "#{post.user.username}", class: "avatar-image rounded-circle", id: "avatarUserHeader") %>
                <% end %>
                <%= link_to "#{post.user.username}", view_profile_path(post.user),data:{turbo: false},class: "mx-1" %>
              </div>
              <div class="card-body" style="background-color: #EFEFEF;">
                <%= link_to post_path(post), class: 'text-decoration-none' do %>
                  <h5 class="card-title"><%= post.title %></h5>
                <% end %>
                <p class="card-text"><%= post.description %></p>
                <% post.tag_list.each do |t| %>
                  <%= link_to "##{t}", "#", class: "title-post-card rounded-3 px-2 py-1"%>
                <% end %>
              </div>
              <div class="card-footer text-muted d-flex justify-content-between" style="border: none; background-color: #EFEFEF;">
                <div>
                  <span style="" class="text-dark"><i class="fa-solid fa-star"></i> <%= post.cached_weighted_like_score %> Points</span>
                  <span style="" class="text-dark"><i class="fa-solid fa-comment-dots"></i> <%= post.comments.count %> Comments</span>
                </div>
                <% if current_user %>
                  <%= link_to bookmark_post_path(post, type: :downvote),data: { turbo_method: :patch }, class: "" do %>
                    <i class="fa-solid fa-bookmark <%= label_styles_bookmark(post, current_user) %>"></i>
                  <% end %>
                <% end %>
              </div>
            </div>
          <% end %>
        <% end %>
      <% end %>
      <div id="load_more_button" class="d-flex justify-content-center mb-5">
        <%= button_to "Load more", pagy_url_for(@pagy, @pagy.next), class: "btn btn-outline-primary btn-lg" %>
      </div>
    </div>
  </div>
</main>