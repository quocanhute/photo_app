<main role="main" class="col-lg-12 px-md-4 mx-auto pt-3">
  <div class="row justify-content-center">
    <h1>Albums Management</h1>

    <%= turbo_frame_tag :albums ,class: "row row-cols-6 d-flex align-items-center" do %>
      <% @albums.each do |album| %>
        <div class="col col-6 col-md-2 my-2 rounded float-left profile-card-album">
          <%= content_tag(:h5,"Belong to #{album.user.username}_#{album.user.id}",class: "belong-user") %>
          <div class="profile-album-card card border-0 align-items-center justify-content-center">
            <% if album.images.blobs.empty? %>
              <%= image_tag("image.jpg", alt: "#{album.title}", class: "profile-album w-100 card-img-top") %>
            <% else %>
              <%= image_tag(album.images.first, alt: "#{album.title}", class: "profile-album w-100 card-img-top") %>
              <%= image_tag(album.images.first, alt: "#{album.title}", class: "profile-album rotated-image1 w-100 card-img-top") %>
              <%= image_tag(album.images.first, alt: "#{album.title}", class: "profile-album rotated-image2 w-100 card-img-top") %>
            <% end %>
            <div class="card-body">
              <p class="card-text"><%= album.title %></p>
            </div>
            <% unless album.is_public? %>
              <i class="border-white fa-solid fa-lock private-photo"></i>
            <% end %>
            <%= link_to "Edit", edit_admin_album_path(album),class: "card-link-view btn btn-lg btn-primary", data: { turbo_frame: "remote_modal" } %>
            <%= link_to "Delete",admin_album_path(album),:method => :delete,  data: { confirm: "Are you sure?" },class: "card-link-edit btn btn-lg btn-primary" %>
            <%= content_tag(:p,"#{pluralize(album.images.count, "Photo")}",class: "circle-total-photos") %>
          </div>
        </div>
      <% end %>
    <%end %>
    <%= turbo_frame_tag :pagination,
                        loading: :lazy,
                        src: admin_albums_path(format: :turbo_stream,page: @pagy.next)
    %>

  </div>
</main>